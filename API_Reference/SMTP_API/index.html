<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->

<!-- SendGrid Docs Version 1.1.23 -->
<head>
  <meta charset="utf-8">
  
    <title>SMTP API, Advanced Email Features -  SendGrid Documentation | SendGrid</title>
  
  <meta name="author" content="SendGrid">

  
    <meta name="description" content="The SMTP API gives you advanced control over emails you send. Through the X-SMTPAPI header, you can replace values, categorize messages and more.">
  

  
  
  
  
  <link rel="canonical" href="https://nquinlan.github.io/docs/API_Reference/SMTP_API/index.html"/>
  

  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="/images/favicon.ico" rel="icon">

  <link href="/assets/global-f10deda0249ac6dbcfabbbff801c41f0.css" rel="stylesheet" type='text/css' />

  <script type="text/javascript">

  filename = "/assets/global-92685393eede4b27b1c04bcdcc8c53eb.js"

   // Add a script element as a child of the body
   function downloadJSAtOnload() {
   var element = document.createElement("script");
   element.src = filename;
   document.body.appendChild(element);
   }

   // Check for browser support of event handling capability
   if (window.addEventListener)
   window.addEventListener("load", downloadJSAtOnload, false);
   else if (window.attachEvent)
   window.attachEvent("onload", downloadJSAtOnload);
   else window.onload = downloadJSAtOnload;

  </script>

  <link href="/atom.xml" rel="alternate" title="SendGrid Documentation | SendGrid" type="application/atom+xml">
  
  <!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-PQC59L"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PQC59L');</script>
<!-- End Google Tag Manager -->
  
</head>


<body  class="  logged-out" itemscope itemtype="http://schema.org/WebPage">

  <div id="header">
  <div id="header-top">
      <div class="container-fluid">
          <div class="row pull-right col-md-1 hidden-xs logged-out login-link">
            <a href="https://sendgrid.com/login">Sign In</a>
          </div>
      </div>
  </div>
  <div class="navbar navbar-static-top" id="nav">
  <div class="container-fluid">
    <div class="row">
      <div class="navbar-header col-md-3">
        <a href="//sendgrid.com"><span id="logo"></span></a>
        <button type="button" class="navbar-toggle"
          data-toggle="collapse" data-target="#navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-list collapsed-icon"></span>
        </button>
      </div>
      <div class="collapse navbar-collapse col-sm-4" id="navbar">
        <ul class="nav navbar-nav" id="nav-links">
          <li class="nav-link ">
            <a href="/index.html">Docs Home</a>
          </li>
          <li class="nav-link">
            <a href="/code_workshop.html">Code Workshop</a>
          </li>
          <li class="nav-link ">
            <a href="/VidGrid/index.html">VidGrid</a>
          </li>
          <li class="nav-link">
            <a href="http://support.sendgrid.com/">Support</a>
          </li>
          <li class="nav-link visible-xs">
            <a href="http://sendgrid.com/marketing/request-demo" class="btn btn-primary btn-block">Contact Us</a>
            <a href="https://sendgrid.com/user/signup" class="btn btn-success btn-block logged-out">Sign Up</a>
            <a href="https://sendgrid.com/login" class="btn btn-default btn-block logged-out">Sign In</a>
          </li>
        </ul>
      </div>
      <div class="pull-right navbar-buttons hidden-xs">
        <a href="http://sendgrid.com/marketing/request-demo" class="btn btn-primary">Contact Us</a>
        <a href="https://sendgrid.com/user/signup"class="btn btn-success logged-out">Sign Up</a>
      </div>
    </div>
  </div>
</div>

</div>

  <div itemscope itemtype='https://schema.org/Brand'>
    <meta content='SendGrid' itemprop='name'>
    <link href='http://www.freebase.com/m/0wr97kd' itemprop='sameAs'>
  </div>
  <div class="container-fluid">
    <div class="row" id="content">
      
    
<div class="col-md-3 col-sm-3 nopadding">
    <div id="sidebar-header" class="visible-xs navbar-header col-md-3">
      <h3>Menu</h3>

      <button type="button" class="navbar-toggle" data-toggle="collapse"
        data-target="#sidebar">
        <span class="sr-only">Toggle Documentation Tree</span>
        <span class="icon-arrow-down"></span>
      </button>
    </div>

    <div class="collapse navbar-collapse nopadding" id="sidebar">
      
      <form class="navbar-search">
        <div class="input-group">
          <input type="text" id="query" class="form-control search-query" name="q" placeholder="Search Documentation">
          <span class="input-group-btn">
            <button class="btn btn-primary">
              <span class="icon-search"></span>
            </button>
          </span>
        </div>
      </form>

	  <nav itemscope itemtype="http://schema.org/SiteNavigationElement"><ul id="nav-menu" class="nav nav-list"><li class=><a href="/index.html"><span class="icon-home"></span>Docs Home</a></li><li class=><a href="/code_workshop.html"><span class="icon-apiworkshop_v2"></span>Code Workshop</a></li>	<li id="node-8a52ace95047ffc87794724b7c4a9281" class="parent collapsibleListOpen"><div class="subtree-name">API Reference</div>	 <ul  class="nav nav-list">	 <li class=><a href="/API_Reference/index.html">API Reference Index</a></li>	 	<li id="node-aef7bb35ae95b00d2effee70fe911a52" class="parent collapsibleListOpen"><div class="subtree-name">SMTP API</div>	 	 <ul  class="nav nav-list">	 	 <li class=active><a href="/API_Reference/SMTP_API/index.html">SMTP API Overview</a></li>	 	 <li class=><a href="/API_Reference/SMTP_API/smtpapi_validator.html">SMTP API Header Validator</a></li>	 	 <li class=><a href="/API_Reference/SMTP_API/apps.html">Apps (Filters)</a></li>	 	 <li class=><a href="/API_Reference/SMTP_API/categories.html">Categories</a></li>	 	 <li class=><a href="/API_Reference/SMTP_API/scheduling_parameters.html">Scheduling Parameters</a></li>	 	 <li class=><a href="/API_Reference/SMTP_API/section_tags.html">Section Tags</a></li>	 	 <li class=><a href="/API_Reference/SMTP_API/substitution_tags.html">Substitution Tags</a></li>	 	 <li class=><a href="/API_Reference/SMTP_API/unique_arguments.html">Unique Arguments</a></li>	 	  </ul></li>	 	<li id="node-b0f0d5be2bcf162184781bf97aec716d" class="parent collapsibleListClosed"><div class="subtree-name">Web API</div>	 	 <ul  class="nav nav-list">	 	 <li class=><a href="/API_Reference/Web_API/index.html">Web API Overview</a></li>	 	 <li class=><a href="/API_Reference/Web_API/blocks.html">Blocks</a></li>	 	 <li class=><a href="/API_Reference/Web_API/bounces.html">Bounces</a></li>	 	 <li class=><a href="/API_Reference/Web_API/filter_commands.html">Filter Commands</a></li>	 	 <li class=><a href="/API_Reference/Web_API/filter_settings.html">Filter Settings</a></li>	 	 <li class=><a href="/API_Reference/Web_API/invalid_emails.html">Invalid Emails</a></li>	 	 <li class=><a href="/API_Reference/Web_API/mail.html">Mail</a></li>	 	 <li class=><a href="/API_Reference/Web_API/multiple_credentials.html">Multiple Credentials</a></li>	 	 <li class=><a href="/API_Reference/Web_API/parse_settings.html">Parse Webhook Settings</a></li>	 	 <li class=><a href="/API_Reference/Web_API/profile.html">Profile</a></li>	 	 <li class=><a href="/API_Reference/Web_API/spam_reports.html">Spam Reports</a></li>	 	 <li class=><a href="/API_Reference/Web_API/unsubscribes.html">Unsubscribes</a></li>	 	 	<li id="node-618292753ab9ce06fc97d39f3a6acaf4" class="parent collapsibleListClosed"><div class="subtree-name">Statistics</div>	 	 	 <ul  class="nav nav-list">	 	 	 <li class=><a href="/API_Reference/Web_API/Statistics/index.html">General Statistics</a></li>	 	 	 <li class=><a href="/API_Reference/Web_API/Statistics/statistics_advanced.html">Advanced Statistics</a></li>	 	 	  </ul></li>	 	  </ul></li>	 	<li id="node-90235f2cb860fbcbd079ee29acc7587d" class="parent collapsibleListClosed"><div class="subtree-name">Web API v3</div>	 	 <ul  class="nav nav-list">	 	 <li class=><a href="/API_Reference/Web_API_v3/index.html">API v3 Overview</a></li>	 	 	<li id="node-1e8a193b1c037e8ee75282dc639db5d5" class="parent collapsibleListClosed"><div class="subtree-name">Advanced Suppression Manager</div>	 	 	 <ul  class="nav nav-list">	 	 	 <li class=><a href="/API_Reference/Web_API_v3/Advanced_Suppression_Manager/index.html">Advanced Suppression Manager Overview</a></li>	 	 	 <li class=><a href="/API_Reference/Web_API_v3/Advanced_Suppression_Manager/groups.html">Groups</a></li>	 	 	 <li class=><a href="/API_Reference/Web_API_v3/Advanced_Suppression_Manager/suppressions.html">Supressions</a></li>	 	 	 <li class=><a href="/API_Reference/Web_API_v3/Advanced_Suppression_Manager/global_suppressions.html">Global Supressions</a></li>	 	 	  </ul></li>	 	 	<li id="node-1fce5b090717c4755d9f5d33b53ab065" class="parent collapsibleListClosed"><div class="subtree-name">IP Management</div>	 	 	 <ul  class="nav nav-list">	 	 	 <li class=><a href="/API_Reference/Web_API_v3/IP_Management/index.html">IP Management Overview</a></li>	 	 	 <li class=><a href="/API_Reference/Web_API_v3/IP_Management/ip_addresses.html">IP Addresses</a></li>	 	 	 <li class=><a href="/API_Reference/Web_API_v3/IP_Management/ip_pools.html">IP Pools</a></li>	 	 	 <li class=><a href="/API_Reference/Web_API_v3/IP_Management/ip_warmup.html">IP Warmup</a></li>	 	 	 <li class=><a href="/API_Reference/Web_API_v3/IP_Management/ip_warmup_schedule.html">IP Warmup Schedule</a></li>	 	 	  </ul></li>	 	 	<li id="node-1d8bc0842dba67c6f482cdb2931c4228" class="parent collapsibleListClosed"><div class="subtree-name">Template Engine</div>	 	 	 <ul  class="nav nav-list">	 	 	 <li class=><a href="/API_Reference/Web_API_v3/Template_Engine/index.html">Template Engine Overview</a></li>	 	 	 <li class=><a href="/API_Reference/Web_API_v3/Template_Engine/templates.html">Templates</a></li>	 	 	 <li class=><a href="/API_Reference/Web_API_v3/Template_Engine/versions.html">Versions</a></li>	 	 	 <li class=><a href="/API_Reference/Web_API_v3/Template_Engine/smtpapi.html">Using Template Engine with SMTP API</a></li>	 	 	  </ul></li>	 	  </ul></li>	 	<li id="node-e0784a128dd24cee066e2748272619dc" class="parent collapsibleListClosed"><div class="subtree-name">Webhooks</div>	 	 <ul  class="nav nav-list">	 	 <li class=><a href="/API_Reference/Webhooks/index.html">Webhooks Overview</a></li>	 	 <li class=><a href="/API_Reference/Webhooks/debug.html">Debugging Webhooks</a></li>	 	 <li class=><a href="/API_Reference/Webhooks/event.html">Event Webhook</a></li>	 	 <li class=><a href="/API_Reference/Webhooks/event_deprecated.html">Event V1/V2 (deprecated)</a></li>	 	 <li class=><a href="/API_Reference/Webhooks/parse.html">Inbound Parse Webhook</a></li>	 	  </ul></li>	 	<li id="node-74b51dc260c6e13029f1cd9e9a5e5b74" class="parent collapsibleListClosed"><div class="subtree-name">Customer Subuser API</div>	 	 <ul  class="nav nav-list">	 	 <li class=><a href="/API_Reference/Customer_Subuser_API/index.html">Customer Subuser API Overview</a></li>	 	 <li class=><a href="/API_Reference/Customer_Subuser_API/account_limits.html">Account Limits</a></li>	 	 <li class=><a href="/API_Reference/Customer_Subuser_API/apps.html">Apps</a></li>	 	 <li class=><a href="/API_Reference/Customer_Subuser_API/authenticate_a_subuser.html">Authenticate a Subuser</a></li>	 	 <li class=><a href="/API_Reference/Customer_Subuser_API/automatic_login.html">Automatic Login</a></li>	 	 <li class=><a href="/API_Reference/Customer_Subuser_API/event_notification_url.html">Event Notification URL</a></li>	 	 <li class=><a href="/API_Reference/Customer_Subuser_API/invalid_emails.html">Invalid Emails</a></li>	 	 <li class=><a href="/API_Reference/Customer_Subuser_API/ip_management.html">IP Management</a></li>	 	 <li class=><a href="/API_Reference/Customer_Subuser_API/monitor_records.html">Monitor Records</a></li>	 	 <li class=><a href="/API_Reference/Customer_Subuser_API/parse_settings.html">Parse Settings</a></li>	 	 <li class=><a href="/API_Reference/Customer_Subuser_API/statistics.html">Statistics</a></li>	 	 <li class=><a href="/API_Reference/Customer_Subuser_API/subuser_bounces.html">Subuser Bounces</a></li>	 	 <li class=><a href="/API_Reference/Customer_Subuser_API/subuser_spam_reports.html">Subuser Spam Reports</a></li>	 	 <li class=><a href="/API_Reference/Customer_Subuser_API/subuser_unsubscribes.html">Subuser Unsubscribes</a></li>	 	 <li class=><a href="/API_Reference/Customer_Subuser_API/subusers.html">Subusers</a></li>	 	 <li class=><a href="/API_Reference/Customer_Subuser_API/whitelabel.html">Whitelabel</a></li>	 	 	<li id="node-12f3ac7e6a04ebccdd6d31c752da0c53" class="parent collapsibleListClosed"><div class="subtree-name">v1 (deprecated)</div>	 	 	 <ul  class="nav nav-list">	 	 	 <li class=><a href="/API_Reference/Customer_Subuser_API/v1_(deprecated)/index.html">Customer Subuser API v1 (deprecated)</a></li>	 	 	 <li class=><a href="/API_Reference/Customer_Subuser_API/v1_(deprecated)/automatic_login.html">Automatic Login</a></li>	 	 	 <li class=><a href="/API_Reference/Customer_Subuser_API/v1_(deprecated)/event_notification_url.html">Event Notification URL</a></li>	 	 	 <li class=><a href="/API_Reference/Customer_Subuser_API/v1_(deprecated)/invalid_emails.html">Invalid Emails</a></li>	 	 	 <li class=><a href="/API_Reference/Customer_Subuser_API/v1_(deprecated)/subuser_bounces.html">Subuser Bounces</a></li>	 	 	 <li class=><a href="/API_Reference/Customer_Subuser_API/v1_(deprecated)/subuser_spam_reports.html">Subuser Spam Reports</a></li>	 	 	 <li class=><a href="/API_Reference/Customer_Subuser_API/v1_(deprecated)/subuser_unsubscribes.html">Subuser Unsubscribes</a></li>	 	 	  </ul></li>	 	  </ul></li>	 	<li id="node-35d6d9657bc8af50df1778efb28ab10b" class="parent collapsibleListClosed"><div class="subtree-name">Marketing Emails API</div>	 	 <ul  class="nav nav-list">	 	 <li class=><a href="/API_Reference/Marketing_Emails_API/index.html">Marketing Email API Overview</a></li>	 	 <li class=><a href="/API_Reference/Marketing_Emails_API/categories.html">Categories</a></li>	 	 <li class=><a href="/API_Reference/Marketing_Emails_API/emails.html">Emails</a></li>	 	 <li class=><a href="/API_Reference/Marketing_Emails_API/lists.html">Lists</a></li>	 	 <li class=><a href="/API_Reference/Marketing_Emails_API/newsletters.html">Marketing Emails</a></li>	 	 <li class=><a href="/API_Reference/Marketing_Emails_API/recipients.html">Recipients</a></li>	 	 <li class=><a href="/API_Reference/Marketing_Emails_API/schedule.html">Schedule</a></li>	 	 <li class=><a href="/API_Reference/Marketing_Emails_API/sender_address.html">Sender Address</a></li>	 	 <li class=><a href="/API_Reference/Marketing_Emails_API/variations.html">Variations (A/B Testing)</a></li>	 	  </ul></li>	 	<li id="node-d6b4c297fb0109dc6fe1a58e49d16b9a" class="parent collapsibleListClosed"><div class="subtree-name">Reseller API</div>	 	 <ul  class="nav nav-list">	 	 <li class=><a href="/API_Reference/Reseller_API/index.html">Reseller API Overview</a></li>	 	 <li class=><a href="/API_Reference/Reseller_API/account_overview.html">Account Overview</a></li>	 	 <li class=><a href="/API_Reference/Reseller_API/apps.html">Apps</a></li>	 	 <li class=><a href="/API_Reference/Reseller_API/authenticate_a_customer.html">Authenticate a Customer</a></li>	 	 <li class=><a href="/API_Reference/Reseller_API/authenticate_a_customer_subuser.html">Authenticate a Customer Subuser</a></li>	 	 <li class=><a href="/API_Reference/Reseller_API/automatic_login.html">Automatic Login</a></li>	 	 <li class=><a href="/API_Reference/Reseller_API/billing_retrieving_as_you_go_usage.html">Retrieving As-You-Go Usage</a></li>	 	 <li class=><a href="/API_Reference/Reseller_API/billing_retrieving_end_users_invoices_usage.html">Retrieving Invoice Usage</a></li>	 	 <li class=><a href="/API_Reference/Reseller_API/customer_account_limits.html">Customer Account Limits</a></li>	 	 <li class=><a href="/API_Reference/Reseller_API/customer_bounces.html">Customer Bounces</a></li>	 	 <li class=><a href="/API_Reference/Reseller_API/customer_invalid_emails.html">Customer Invalid Emails</a></li>	 	 <li class=><a href="/API_Reference/Reseller_API/customer_management.html">Customer Management</a></li>	 	 <li class=><a href="/API_Reference/Reseller_API/customer_spam_reports.html">Customer Spam Reports</a></li>	 	 <li class=><a href="/API_Reference/Reseller_API/customer_statistics.html">Customer Statistics</a></li>	 	 <li class=><a href="/API_Reference/Reseller_API/customer_subuser_account_limits.html">Customer Subuser Account Limits</a></li>	 	 <li class=><a href="/API_Reference/Reseller_API/customer_subuser_apps.html">Customer Subuser Apps</a></li>	 	 <li class=><a href="/API_Reference/Reseller_API/customer_subuser_automatic_login.html">Customer Subuser Automatic Login</a></li>	 	 <li class=><a href="/API_Reference/Reseller_API/customer_subuser_bounces.html">Customer Subuser Bounces</a></li>	 	 <li class=><a href="/API_Reference/Reseller_API/customer_subuser_event_notification_url.html">Customer Subuser Event Notification URL</a></li>	 	 <li class=><a href="/API_Reference/Reseller_API/customer_subuser_invalid_emails.html">Customer Subuser Invalid Emails</a></li>	 	 <li class=><a href="/API_Reference/Reseller_API/customer_subuser_monitor_outgoing_email.html">Customer Subuser Monitor Outgoing Email</a></li>	 	 <li class=><a href="/API_Reference/Reseller_API/customer_subuser_parse_settings.html">Customer Subuser Parse Settings</a></li>	 	 <li class=><a href="/API_Reference/Reseller_API/customer_subuser_spam_reports.html">Customer Subuser Spam Reports</a></li>	 	 <li class=><a href="/API_Reference/Reseller_API/customer_subuser_statistics.html">Customer Subuser Statistics</a></li>	 	 <li class=><a href="/API_Reference/Reseller_API/customer_subuser_timezone.html">Customer Subuser Timezone</a></li>	 	 <li class=><a href="/API_Reference/Reseller_API/customer_subuser_unsubscribes.html">Customer Subuser Unsubscribes</a></li>	 	 <li class=><a href="/API_Reference/Reseller_API/customer_timezone.html">Customer Timezone</a></li>	 	 <li class=><a href="/API_Reference/Reseller_API/customer_unsubscribes.html">Customer Unsubscribes</a></li>	 	 <li class=><a href="/API_Reference/Reseller_API/event_notification_url.html">Event Notification URL</a></li>	 	 <li class=><a href="/API_Reference/Reseller_API/invoice_retrieval.html">Invoice Retrieval</a></li>	 	 <li class=><a href="/API_Reference/Reseller_API/ip_management.html">IP Management</a></li>	 	 <li class=><a href="/API_Reference/Reseller_API/monitor_records.html">Monitor Records</a></li>	 	 <li class=><a href="/API_Reference/Reseller_API/multiple_credentials.html">Multiple Credentials</a></li>	 	 <li class=><a href="/API_Reference/Reseller_API/parse_settings.html">Parse Settings</a></li>	 	 <li class=><a href="/API_Reference/Reseller_API/pending_account_changes.html">Pending Account Changes</a></li>	 	 <li class=><a href="/API_Reference/Reseller_API/view_available_packages.html">View Available Packages</a></li>	 	 <li class=><a href="/API_Reference/Reseller_API/whitelabel.html">Whitelabel</a></li>	 	 	<li id="node-8c7cddda650a3d8299f565e034db8a9c" class="parent collapsibleListClosed"><div class="subtree-name">v1 (deprecated)</div>	 	 	 <ul  class="nav nav-list">	 	 	 <li class=><a href="/API_Reference/Reseller_API/v1_(deprecated)/index.html">Reseller API v1 (deprecated) Index</a></li>	 	 	 <li class=><a href="/API_Reference/Reseller_API/v1_(deprecated)/account_overview.html">Account Overview</a></li>	 	 	 <li class=><a href="/API_Reference/Reseller_API/v1_(deprecated)/apps.html">Apps</a></li>	 	 	 <li class=><a href="/API_Reference/Reseller_API/v1_(deprecated)/authenticate_a_customer.html">Authenticate a Customer</a></li>	 	 	 <li class=><a href="/API_Reference/Reseller_API/v1_(deprecated)/authenticate_a_customer_subuser.html">Authenticate a Customer Subuser</a></li>	 	 	 <li class=><a href="/API_Reference/Reseller_API/v1_(deprecated)/automatic_login.html">Automatic Login</a></li>	 	 	 <li class=><a href="/API_Reference/Reseller_API/v1_(deprecated)/billing.html">Billing</a></li>	 	 	 <li class=><a href="/API_Reference/Reseller_API/v1_(deprecated)/billing_retrieving_as_you_go_usage.html">Retrieving As-You-Go Usage</a></li>	 	 	 <li class=><a href="/API_Reference/Reseller_API/v1_(deprecated)/billing_retrieving_end_users_invoices_usage.html">Retrieving End User Invoice</a></li>	 	 	 <li class=><a href="/API_Reference/Reseller_API/v1_(deprecated)/customer_account_limits.html">Customer Account Limits</a></li>	 	 	 <li class=><a href="/API_Reference/Reseller_API/v1_(deprecated)/customer_bounces.html">Customer Bounces</a></li>	 	 	 <li class=><a href="/API_Reference/Reseller_API/v1_(deprecated)/customer_invalid_emails.html">Customer Invalid Emails</a></li>	 	 	 <li class=><a href="/API_Reference/Reseller_API/v1_(deprecated)/customer_management.html">Customer Management</a></li>	 	 	 <li class=><a href="/API_Reference/Reseller_API/v1_(deprecated)/customer_spam_reports.html">Customer Spam Reports</a></li>	 	 	 <li class=><a href="/API_Reference/Reseller_API/v1_(deprecated)/customer_statistics.html">Customer Statistics</a></li>	 	 	 <li class=><a href="/API_Reference/Reseller_API/v1_(deprecated)/customer_subuser_account_limits.html">Customer Subuser Account Limits</a></li>	 	 	 <li class=><a href="/API_Reference/Reseller_API/v1_(deprecated)/customer_subuser_apps_filters.html">Customer Subuser Apps</a></li>	 	 	 <li class=><a href="/API_Reference/Reseller_API/v1_(deprecated)/customer_subuser_automatic_login.html">Customer Subuser Automatic Login</a></li>	 	 	 <li class=><a href="/API_Reference/Reseller_API/v1_(deprecated)/customer_subuser_bounces.html">Customer Subuser Bounces</a></li>	 	 	 <li class=><a href="/API_Reference/Reseller_API/v1_(deprecated)/customer_subuser_event_notification_url.html">Customer Subuser Event Notification URL</a></li>	 	 	 <li class=><a href="/API_Reference/Reseller_API/v1_(deprecated)/customer_subuser_invalid_emails.html">Customer Subuser Invalid Emails</a></li>	 	 	 <li class=><a href="/API_Reference/Reseller_API/v1_(deprecated)/customer_subuser_monitor_outgoing_email.html">Customer Subuser Monitor Outgoing Email</a></li>	 	 	 <li class=><a href="/API_Reference/Reseller_API/v1_(deprecated)/customer_subuser_parse_settings.html">Customer Subuser Parse Settings</a></li>	 	 	 <li class=><a href="/API_Reference/Reseller_API/v1_(deprecated)/customer_subuser_spam_reports.html">Customer Subuser Spam Reports</a></li>	 	 	 <li class=><a href="/API_Reference/Reseller_API/v1_(deprecated)/customer_subuser_statistics.html">Customer Subuser Statistics</a></li>	 	 	 <li class=><a href="/API_Reference/Reseller_API/v1_(deprecated)/customer_subuser_unsubscribes.html">Customer Subuser Unsubscribes</a></li>	 	 	 <li class=><a href="/API_Reference/Reseller_API/v1_(deprecated)/customer_unsubscribes.html">Customer Unsubscribes</a></li>	 	 	 <li class=><a href="/API_Reference/Reseller_API/v1_(deprecated)/event_notification_url.html">Event Notification URL</a></li>	 	 	 <li class=><a href="/API_Reference/Reseller_API/v1_(deprecated)/invoice_retrieval.html">Invoice Retrieval</a></li>	 	 	 <li class=><a href="/API_Reference/Reseller_API/v1_(deprecated)/ip_management.html">IP Management</a></li>	 	 	 <li class=><a href="/API_Reference/Reseller_API/v1_(deprecated)/monitor_records.html">Monitor Records</a></li>	 	 	 <li class=><a href="/API_Reference/Reseller_API/v1_(deprecated)/parse_settings.html">Parse Settings</a></li>	 	 	 <li class=><a href="/API_Reference/Reseller_API/v1_(deprecated)/pending_account_changes.html">Pending Account Changes</a></li>	 	 	 <li class=><a href="/API_Reference/Reseller_API/v1_(deprecated)/view_available_packages.html">View Available Packages</a></li>	 	 	 <li class=><a href="/API_Reference/Reseller_API/v1_(deprecated)/whitelabel.html">Whitelabel</a></li>	 	 	  </ul></li>	 	  </ul></li>	  </ul></li>	<li id="node-2e85a09ef64e25ecd00fd36505c363bd" class="parent collapsibleListClosed"><div class="subtree-name">Integrate</div>	 <ul  class="nav nav-list">	 <li class=><a href="/Integrate/index.html">Integrate with SendGrid</a></li>	 <li class=><a href="/Integrate/libraries.html">API Libraries</a></li>	 	<li id="node-de77d58abe13de22cdbb8979bdcea918" class="parent collapsibleListClosed"><div class="subtree-name">Frameworks</div>	 	 <ul  class="nav nav-list">	 	 <li class=><a href="/Integrate/Frameworks/index.html">Frameworks Index</a></li>	 	 <li class=><a href="/Integrate/Frameworks/cakephp.html">CakePHP</a></li>	 	 <li class=><a href="/Integrate/Frameworks/codeigniter.html">CodeIgniter</a></li>	 	 <li class=><a href="/Integrate/Frameworks/django.html">Django</a></li>	 	 <li class=><a href="/Integrate/Frameworks/laravel.html">Laravel</a></li>	 	 <li class=><a href="/Integrate/Frameworks/rubyonrails.html">Ruby on Rails</a></li>	 	 <li class=><a href="/Integrate/Frameworks/symfony.html">Symfony</a></li>	 	 <li class=><a href="/Integrate/Frameworks/zend.html">Zend</a></li>	 	  </ul></li>	 	<li id="node-0a3c8f34802602dfbeabd366ddc3bf82" class="parent collapsibleListClosed"><div class="subtree-name">Mail Clients</div>	 	 <ul  class="nav nav-list">	 	 <li class=><a href="/Integrate/Mail_Clients/index.html">Mail Clients Index</a></li>	 	 <li class=><a href="/Integrate/Mail_Clients/applemail.html">Apple Mail</a></li>	 	 <li class=><a href="/Integrate/Mail_Clients/outlook.html">Outlook 2007</a></li>	 	 <li class=><a href="/Integrate/Mail_Clients/thunderbird.html">Thunderbird</a></li>	 	  </ul></li>	 	<li id="node-244f5d72d1686b3225ac7504e7ff4345" class="parent collapsibleListClosed"><div class="subtree-name">Mail Servers</div>	 	 <ul  class="nav nav-list">	 	 <li class=><a href="/Integrate/Mail_Servers/index.html">Mail Servers Index</a></li>	 	 <li class=><a href="/Integrate/Mail_Servers/exchange_2010.html">Exchange 2010</a></li>	 	 <li class=><a href="/Integrate/Mail_Servers/exim.html">Exim</a></li>	 	 <li class=><a href="/Integrate/Mail_Servers/iis75.html">Microsoft IIS 7.5</a></li>	 	 <li class=><a href="/Integrate/Mail_Servers/postfix.html">Postfix</a></li>	 	 <li class=><a href="/Integrate/Mail_Servers/qmail.html">Qmail</a></li>	 	 <li class=><a href="/Integrate/Mail_Servers/sendmail.html">Sendmail</a></li>	 	 <li class=><a href="/Integrate/Mail_Servers/ssmtp.html">ssmtp</a></li>	 	  </ul></li>	 	<li id="node-97d48d4e204463bbbb01b3af1dc17786" class="parent collapsibleListClosed"><div class="subtree-name">Open Source Apps</div>	 	 <ul  class="nav nav-list">	 	 <li class=><a href="/Integrate/Open_Source_Apps/index.html">Open Source Apps Index</a></li>	 	 <li class=><a href="/Integrate/Open_Source_Apps/drupal.html">Drupal</a></li>	 	 <li class=><a href="/Integrate/Open_Source_Apps/joomla.html">Joomla</a></li>	 	 <li class=><a href="/Integrate/Open_Source_Apps/magento.html">Magento</a></li>	 	 <li class=><a href="/Integrate/Open_Source_Apps/phpbb.html">phpBB</a></li>	 	 <li class=><a href="/Integrate/Open_Source_Apps/wordpress.html">WordPress</a></li>	 	  </ul></li>	 	<li id="node-aca6c5f6d79e9d8c4a3aa0ea9242eed6" class="parent collapsibleListClosed"><div class="subtree-name">Other</div>	 	 <ul  class="nav nav-list">	 	 <li class=><a href="/Integrate/Other/index.html">Other Integrations Index</a></li>	 	 <li class=><a href="/Integrate/Other/interspire.html">Interspire Email Marketer</a></li>	 	  </ul></li>	 	<li id="node-bec159c678f3cc53b17739df235bee56" class="parent collapsibleListClosed"><div class="subtree-name">Partners</div>	 	 <ul  class="nav nav-list">	 	 <li class=><a href="/Integrate/Partners/index.html">Partner Integrations Index</a></li>	 	 <li class=><a href="/Integrate/Partners/EngineYard.html">Deploying a SendGrid App on Engine Yard</a></li>	 	 <li class=><a href="/Integrate/Partners/WindowsAzure.html">Building an iOS App on Windows Azure</a></li>	 	  </ul></li>	  </ul></li>	<li id="node-9df4a6fe141d1a3cd06af53e7391e7d5" class="parent collapsibleListClosed"><div class="subtree-name">Code Examples</div>	 <ul  class="nav nav-list">	 <li class=><a href="/Code_Examples/index.html">Code Examples Index</a></li>	 <li class=><a href="/Code_Examples/csharp.html">C#</a></li>	 <li class=><a href="/Code_Examples/go.html">Go</a></li>	 <li class=><a href="/Code_Examples/ios.html">iOS (Objective-C)</a></li>	 <li class=><a href="/Code_Examples/java.html">Java</a></li>	 <li class=><a href="/Code_Examples/nodejs.html">Node.js</a></li>	 <li class=><a href="/Code_Examples/perl.html">Perl</a></li>	 <li class=><a href="/Code_Examples/php.html">PHP</a></li>	 <li class=><a href="/Code_Examples/python.html">Python</a></li>	 <li class=><a href="/Code_Examples/ruby.html">Ruby</a></li>	 	<li id="node-14e772cadab40796afb5e6f78f03bd30" class="parent collapsibleListClosed"><div class="subtree-name">Webhook Examples</div>	 	 <ul  class="nav nav-list">	 	 <li class=><a href="/Code_Examples/Webhook_Examples/index.html">Webhook Examples Index</a></li>	 	 <li class=><a href="/Code_Examples/Webhook_Examples/csharp.html">C#</a></li>	 	 <li class=><a href="/Code_Examples/Webhook_Examples/go.html">Go</a></li>	 	 <li class=><a href="/Code_Examples/Webhook_Examples/nodejs.html">Node.js</a></li>	 	 <li class=><a href="/Code_Examples/Webhook_Examples/php.html">PHP</a></li>	 	 <li class=><a href="/Code_Examples/Webhook_Examples/python.html">Python</a></li>	 	  </ul></li>	 	<li id="node-3171c6157318c42c549e6010cbb65b36" class="parent collapsibleListClosed"><div class="subtree-name">SMTP API Header Examples</div>	 	 <ul  class="nav nav-list">	 	 <li class=><a href="/Code_Examples/SMTP_API_Header_Examples/index.html">SMTP API Examples Index</a></li>	 	 <li class=><a href="/Code_Examples/SMTP_API_Header_Examples/go.html">Go</a></li>	 	 <li class=><a href="/Code_Examples/SMTP_API_Header_Examples/nodejs.html">Node.js</a></li>	 	 <li class=><a href="/Code_Examples/SMTP_API_Header_Examples/perl.html">Perl</a></li>	 	 <li class=><a href="/Code_Examples/SMTP_API_Header_Examples/php.html">PHP</a></li>	 	 <li class=><a href="/Code_Examples/SMTP_API_Header_Examples/python.html">Python</a></li>	 	 <li class=><a href="/Code_Examples/SMTP_API_Header_Examples/ruby.html">Ruby</a></li>	 	  </ul></li>	  </ul></li>	<li id="node-f629b1c319b1a857a6964d1f1572e154" class="parent collapsibleListClosed"><div class="subtree-name">User Guide</div>	 <ul  class="nav nav-list">	 <li class=><a href="/User_Guide/index.html">SendGrid Overview</a></li>	 <li class=><a href="/User_Guide/smtp_ports.html">SMTP Ports</a></li>	 <li class=><a href="/User_Guide/multiple_credentials.html">Multiple User Credentials</a></li>	 <li class=><a href="/User_Guide/attachments.html">Sending Attachments</a></li>	 <li class=><a href="/User_Guide/whitelabel_wizard.html">Whitelabel Wizard</a></li>	 <li class=><a href="/User_Guide/managing_unsubscribes.html">Managing Unsubscribes</a></li>	 <li class=><a href="/User_Guide/template_engine_setup.html">Template Engine Setup Guide</a></li>	 <li class=><a href="/User_Guide/warming_up.html">Warming Up an IP Address</a></li>	 <li class=><a href="/User_Guide/billing.html">Billing and Account Changes</a></li>	 <li class=><a href="/User_Guide/peer_invitations.html">Peer Initiated Invitation Guide</a></li>	 <li class=><a href="/User_Guide/reconfirmation.html">Reconfirmation Email Campaigns</a></li>	 <li class=><a href="/User_Guide/sending_practices.html">Sending Practices and Limitations</a></li>	 <li class=><a href="/User_Guide/throttling.html">What is Throttling?</a></li>	  </ul></li>	<li id="node-9deb1429a12e2c906e3a500f7ad26e8b" class="parent collapsibleListClosed"><div class="subtree-name">Marketing Emails</div>	 <ul  class="nav nav-list">	 <li class=><a href="/Marketing_Emails/index.html">SendGrid's Marketing Email Tool</a></li>	 <li class=><a href="/Marketing_Emails/create_manage.html">Create and Manage Marketing Emails</a></li>	 <li class=><a href="/Marketing_Emails/dashboard.html">Dashboard</a></li>	 <li class=><a href="/Marketing_Emails/recipients.html">Create and Manage Recipients</a></li>	 <li class=><a href="/Marketing_Emails/sender_address.html">Create and Manage Sender Addresses</a></li>	 <li class=><a href="/Marketing_Emails/tags.html">Marketing Email Tags</a></li>	  </ul></li>	<li id="node-bf4eb86d3fca1b8aa2493203bc59c06f" class="parent collapsibleListClosed"><div class="subtree-name">Delivery Metrics</div>	 <ul  class="nav nav-list">	 <li class=><a href="/Delivery_Metrics/index.html">Delivery Metrics Index</a></li>	 <li class=><a href="/Delivery_Metrics/alerts.html">Alerts</a></li>	 <li class=><a href="/Delivery_Metrics/categories.html">Categories</a></li>	 <li class=><a href="/Delivery_Metrics/email_activity.html">Email Activity</a></li>	 <li class=><a href="/Delivery_Metrics/email_error_messages.html">Email Error Messages</a></li>	 <li class=><a href="/Delivery_Metrics/email_reports.html">Email Reports</a></li>	  </ul></li>	<li id="node-38b334e8c44bd2248734bd286ac5216a" class="parent collapsibleListClosed"><div class="subtree-name">Apps</div>	 <ul  class="nav nav-list">	 <li class=><a href="/Apps/index.html">Apps Index</a></li>	 <li class=><a href="/Apps/address_whitelisting.html">Address Whitelisting</a></li>	 <li class=><a href="/Apps/bcc.html">BCC</a></li>	 <li class=><a href="/Apps/bypass_list_management.html">Bypass List Management</a></li>	 <li class=><a href="/Apps/click_tracking.html">Click Tracking</a></li>	 <li class=><a href="/Apps/dkim.html">DKIM</a></li>	 <li class=><a href="/Apps/domain_keys.html">Domain Keys</a></li>	 <li class=><a href="/Apps/email_templates.html">Legacy Email Templates</a></li>	 <li class=><a href="/Apps/event_notification.html">Event Notification</a></li>	 <li class=><a href="/Apps/footer.html">Footer</a></li>	 <li class=><a href="/Apps/forward_spam.html">Forward Spam</a></li>	 <li class=><a href="/Apps/google_analytics.html">Google Analytics</a></li>	 <li class=><a href="/Apps/gravatar.html">Gravatar</a></li>	 <li class=><a href="/Apps/new_relic.html">SendGrid for New Relic</a></li>	 <li class=><a href="/Apps/open_tracking.html">Open Tracking</a></li>	 <li class=><a href="/Apps/sendwithus.html">Sendwithus</a></li>	 <li class=><a href="/Apps/spam_checker.html">Spam Checker</a></li>	 <li class=><a href="/Apps/subscription_tracking.html">Subscription Tracking</a></li>	 <li class=><a href="/Apps/template_engine.html">Template Engine</a></li>	  </ul></li>	<li id="node-52cc0ffc19dc4d4a0a29c77edeb76c79" class="parent collapsibleListClosed"><div class="subtree-name"><span class="icon-vidgrid"></span>VidGrid</div>	 <ul  class="nav nav-list">	 <li class=><a href="/VidGrid/index.html">VidGrid Overview</a></li>	 	<li id="node-f962fb28b7c507019ec0b9e388b1e727" class="parent collapsibleListClosed"><div class="subtree-name">Email Activity</div>	 	 <ul  class="nav nav-list">	 	 <li class=><a href="/VidGrid/Email_Activity/activity.html">Email Activity</a></li>	 	  </ul></li>	 	<li id="node-67591f81c980a679776292a0b6a1adb9" class="parent collapsibleListClosed"><div class="subtree-name">Event Notification</div>	 	 <ul  class="nav nav-list">	 	 <li class=><a href="/VidGrid/Event_Notification/configure.html">Event Notification App</a></li>	 	 <li class=><a href="/VidGrid/Event_Notification/eventkit.html">EventKit App</a></li>	 	  </ul></li>	 	<li id="node-e530d579fe874c0e418241fe57757bc6" class="parent collapsibleListClosed"><div class="subtree-name">Marketing Emails</div>	 	 <ul  class="nav nav-list">	 	 	<li id="node-23f6c350a0861dc148c0335bbb714bf1" class="parent collapsibleListClosed"><div class="subtree-name">Setup</div>	 	 	 <ul  class="nav nav-list">	 	 	 <li class=><a href="/VidGrid/Marketing_Emails/Setup/overview.html">Marketing Email Setup</a></li>	 	 	  </ul></li>	 	 	<li id="node-7ddcf820f125cba1fe443b7bfb28ea9b" class="parent collapsibleListClosed"><div class="subtree-name">Recipients</div>	 	 	 <ul  class="nav nav-list">	 	 	 <li class=><a href="/VidGrid/Marketing_Emails/Recipients/exporting.html">Exporting Your Recipient List</a></li>	 	 	 <li class=><a href="/VidGrid/Marketing_Emails/Recipients/recipient_list.html">Recipient Lists</a></li>	 	 	  </ul></li>	 	 	<li id="node-464d416f22fbb8266ab7b54b57214828" class="parent collapsibleListClosed"><div class="subtree-name">Design</div>	 	 	 <ul  class="nav nav-list">	 	 	 <li class=><a href="/VidGrid/Marketing_Emails/Design/newsletter_basics.html">Marketing Email Basics</a></li>	 	 	 <li class=><a href="/VidGrid/Marketing_Emails/Design/drag_and_drop.html">Drag and Drop</a></li>	 	 	 <li class=><a href="/VidGrid/Marketing_Emails/Design/subscription_widget.html">Subscription Widget</a></li>	 	 	 <li class=><a href="/VidGrid/Marketing_Emails/Design/weblink.html">Unsubscribe Link and Weblink</a></li>	 	 	  </ul></li>	 	 	<li id="node-be758de3fffa43a91c64b7980ac90030" class="parent collapsibleListClosed"><div class="subtree-name">Review and Schedule</div>	 	 	 <ul  class="nav nav-list">	 	 	 <li class=><a href="/VidGrid/Marketing_Emails/Review_and_Schedule/split_testing.html">A/B Split Testing</a></li>	 	 	 <li class=><a href="/VidGrid/Marketing_Emails/Review_and_Schedule/scheduling.html">Scheduling Your Marketing Email</a></li>	 	 	  </ul></li>	 	 	<li id="node-19347de1713b1f062f1147ff7bfaa25e" class="parent collapsibleListClosed"><div class="subtree-name">Analytics</div>	 	 	 <ul  class="nav nav-list">	 	 	 <li class=><a href="/VidGrid/Marketing_Emails/Analytics/marketing_statistics.html">Understanding Marketing Statistics</a></li>	 	 	 <li class=><a href="/VidGrid/Marketing_Emails/Analytics/unsubscribe_management.html">Managing Marketing Email Unsubscribe List</a></li>	 	 	  </ul></li>	 	  </ul></li>	 	<li id="node-e003c87d6a17792328f0dac62be1dc3c" class="parent collapsibleListClosed"><div class="subtree-name">Subuser</div>	 	 <ul  class="nav nav-list">	 	 <li class=><a href="/VidGrid/Subuser/create_subuser.html">Creating a Subuser</a></li>	 	 <li class=><a href="/VidGrid/Subuser/create_subuser_whitelabel.html">Creating a Subuser with its own Whitelabel</a></li>	 	  </ul></li>	 	<li id="node-9f5fdbeb6a998d31522669df05f57541" class="parent collapsibleListClosed"><div class="subtree-name">Template Engine</div>	 	 <ul  class="nav nav-list">	 	 <li class=><a href="/VidGrid/Template_Engine/template_engine.html">Using the Template Engine</a></li>	 	  </ul></li>	 	<li id="node-ae35cf74298a06d7f01bb5a4a1c96675" class="parent collapsibleListClosed"><div class="subtree-name">Whitelabel</div>	 	 <ul  class="nav nav-list">	 	 <li class=><a href="/VidGrid/Whitelabel/whitelabel.html">Whitelabel Wizard</a></li>	 	  </ul></li>	  </ul></li> </ul></nav>
    </div>
</div>




<div class="col-md-9 col-sm-9 content-wrapper">
  
    <section><div class="breadcrumb-pane clearfix"><ul class="breadcrumb"><li itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><a href="/index.html" itemprop="url"><span itemprop="title">Documentation</span></a></li><li itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><a href="/API_Reference/index.html" itemprop="url"><span itemprop="title">API Reference</span></a></li><li itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><a href="/API_Reference/SMTP_API/index.html" itemprop="url"><span itemprop="title">SMTP API</span></a></li><li itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><span itemprop="title">SMTP API Overview</span><meta itemprop="url" content="https://nquinlan.github.io/docs/API_Reference/SMTP_API/index.html" /></li></ul><a class="edit-link" href="https://github.com/sendgrid/docs/blob/develop/source/API_Reference/SMTP_API/index.html"><span class="icon-edit"></span> Edit</a></div></section>
  
<article role="article" itemprop="mainContentOfPage" itemscope itemtype="http://schema.org/WebPageElement">

    
  <header class="page-header">
    <h1 class="entry-title" itemprop="name">SMTP API Overview</h1>
  </header>
  

  <p>SendGrid&#8217;s SMTP API allows developers to specify custom handling instructions for e-mail. This is accomplished through a header, X-SMTPAPI, that is inserted into the message. The header is a JSON encoded list of instructions and options for that email. An example header looks like this:</p>

<div class="code-wrapper" id="wrapper_c65997629e5dc6b0b902a51d31250b23" itemscope itemtype="http://schema.org/Code">
  <meta itemscope="name" content="">
  <meta itemscope="programmingLangauge" content="json">
  <div class="code-buttons">
    <ul class="nav nav-tabs">
      <li class="pull-right">
        <a class="copycode code-button btn-mini" id="copy_c65997629e5dc6b0b902a51d31250b23">
          <i class="icon-copy"></i> Copy
        </a>
      </li>
      <li class="pull-right">
        <a class="expandcode code-button btn-mini" id="expand_c65997629e5dc6b0b902a51d31250b23">
          <i class="icon-fullscreen"></i> Fullscreen
        </a>
      </li>
    </ul>
  </div>
  <figure class="code" id="code_c65997629e5dc6b0b902a51d31250b23">
  
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="s2">&quot;category&quot;</span><span class="o">:</span> <span class="s2">&quot;newuser&quot;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></div>
<p>In this case, the header is telling the processing routine to assign this email the <a href="/Delivery_Metrics/categories.html">category</a> of &#8220;newuser&#8221;.</p>

<h2 class="anchor-wrap"><a name="-The-XSMTPAPI-Header" class="anchor" href="#-The-XSMTPAPI-Header"><span class="anchor-icon"><i class="icon-link"></i></span></a>The X-SMTPAPI Header</h2>

<p>The X-SMTPAPI header is a JSON-encoded associative array consisting of several sections, below are examples of JSON strings using each section. This header can be added to any SMTP message sent to SendGrid and the instructions in the header will be interpreted and applied to that message&#8217;s transacation.</p>

<p>
	To: An array of addresses to send the message to, optionally including
  the display name.
</p>
<div class="code-wrapper" id="wrapper_b29a5d8990aab70a038af2b1ae9f29fb" itemscope itemtype="http://schema.org/Code">
  <meta itemscope="name" content="">
  <meta itemscope="programmingLangauge" content="json">
  <div class="code-buttons">
    <ul class="nav nav-tabs">
      <li class="pull-right">
        <a class="copycode code-button btn-mini" id="copy_b29a5d8990aab70a038af2b1ae9f29fb">
          <i class="icon-copy"></i> Copy
        </a>
      </li>
      <li class="pull-right">
        <a class="expandcode code-button btn-mini" id="expand_b29a5d8990aab70a038af2b1ae9f29fb">
          <i class="icon-fullscreen"></i> Fullscreen
        </a>
      </li>
    </ul>
  </div>
  <figure class="code" id="code_b29a5d8990aab70a038af2b1ae9f29fb">
  
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="s2">&quot;to&quot;</span><span class="o">:</span> <span class="p">[</span>
</span><span class='line'>    <span class="s2">&quot;&lt;ben@example.com&gt;&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;Joe Smith &lt;joe@example.com&gt;&quot;</span>
</span><span class='line'>  <span class="p">]</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></div>

<p>
	<a href="/API_Reference/SMTP_API/substitution_tags.html">Substitution</a>: An associative array of substitution tags, where each tag is associated with a list of replacement text for the tag in the body text. Each Substitution value corresponds to an email in the &#8220;To&#8221; section of the JSON string.
</p>
<div class="code-wrapper" id="wrapper_c7f7e7ec899da0c4e0418346c0192028" itemscope itemtype="http://schema.org/Code">
  <meta itemscope="name" content="">
  <meta itemscope="programmingLangauge" content="json">
  <div class="code-buttons">
    <ul class="nav nav-tabs">
      <li class="pull-right">
        <a class="copycode code-button btn-mini" id="copy_c7f7e7ec899da0c4e0418346c0192028">
          <i class="icon-copy"></i> Copy
        </a>
      </li>
      <li class="pull-right">
        <a class="expandcode code-button btn-mini" id="expand_c7f7e7ec899da0c4e0418346c0192028">
          <i class="icon-fullscreen"></i> Fullscreen
        </a>
      </li>
    </ul>
  </div>
  <figure class="code" id="code_c7f7e7ec899da0c4e0418346c0192028">
  
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="s2">&quot;sub&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="s2">&quot;%name%&quot;</span><span class="o">:</span> <span class="p">[</span>
</span><span class='line'>      <span class="s2">&quot;Ben&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s2">&quot;Joe&quot;</span>
</span><span class='line'>    <span class="p">],</span>
</span><span class='line'>    <span class="s2">&quot;%role%&quot;</span><span class="o">:</span> <span class="p">[</span>
</span><span class='line'>      <span class="s2">&quot;%sellerSection%&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s2">&quot;%buyerSection%&quot;</span>
</span><span class='line'>    <span class="p">]</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></div>

<p>
	<a href="/API_Reference/SMTP_API/section_tags.html">Section</a>: Sections can be used to simplify substitution values that are common to many recipients. This is an associative array of sections that can be used in substitution values.
</p>
<div class="code-wrapper" id="wrapper_3b71169c7c1b511fb09975da044aab71" itemscope itemtype="http://schema.org/Code">
  <meta itemscope="name" content="">
  <meta itemscope="programmingLangauge" content="json">
  <div class="code-buttons">
    <ul class="nav nav-tabs">
      <li class="pull-right">
        <a class="copycode code-button btn-mini" id="copy_3b71169c7c1b511fb09975da044aab71">
          <i class="icon-copy"></i> Copy
        </a>
      </li>
      <li class="pull-right">
        <a class="expandcode code-button btn-mini" id="expand_3b71169c7c1b511fb09975da044aab71">
          <i class="icon-fullscreen"></i> Fullscreen
        </a>
      </li>
    </ul>
  </div>
  <figure class="code" id="code_3b71169c7c1b511fb09975da044aab71">
  
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="s2">&quot;section&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="s2">&quot;%sellerSection%&quot;</span><span class="o">:</span> <span class="s2">&quot;Seller information for: %name%&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;%buyerSection%&quot;</span><span class="o">:</span> <span class="s2">&quot;Buyer information for: %name%&quot;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></div>

<p>
	<a href="/API_Reference/SMTP_API/categories.html">Category</a>: Associates the category of email this should be logged as. You may insert up to 10 categories as an array, these categories are not predefined. Categories are intended for broader tracking, such as &#8220;newsletter&#8221; or &#8220;password_reset&#8221;. 
</p>
<div class="code-wrapper" id="wrapper_b842a8bd9cd0b18ff8bd16313914a9c0" itemscope itemtype="http://schema.org/Code">
  <meta itemscope="name" content="">
  <meta itemscope="programmingLangauge" content="json">
  <div class="code-buttons">
    <ul class="nav nav-tabs">
      <li class="pull-right">
        <a class="copycode code-button btn-mini" id="copy_b842a8bd9cd0b18ff8bd16313914a9c0">
          <i class="icon-copy"></i> Copy
        </a>
      </li>
      <li class="pull-right">
        <a class="expandcode code-button btn-mini" id="expand_b842a8bd9cd0b18ff8bd16313914a9c0">
          <i class="icon-fullscreen"></i> Fullscreen
        </a>
      </li>
    </ul>
  </div>
  <figure class="code" id="code_b842a8bd9cd0b18ff8bd16313914a9c0">
  
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="s2">&quot;category&quot;</span><span class="o">:</span> <span class="p">[</span>
</span><span class='line'>    <span class="s2">&quot;category1&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;category2&quot;</span>
</span><span class='line'>  <span class="p">]</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></div>

<p>
	<a href="/API_Reference/SMTP_API/unique_arguments.html">Unique Arguments</a>: An associative array of arguments and their values to be applied to all emails sent in this SMTP API transaction. Unique Args are intended for more detailed tracking, such as &#8220;newsletter_fall_sale_1_1_14&#8221; or &#8220;password_reset_user123456&#8221;.
</p>
<div class="code-wrapper" id="wrapper_db50c7d2897a8db6b172aee4af251b3c" itemscope itemtype="http://schema.org/Code">
  <meta itemscope="name" content="">
  <meta itemscope="programmingLangauge" content="json">
  <div class="code-buttons">
    <ul class="nav nav-tabs">
      <li class="pull-right">
        <a class="copycode code-button btn-mini" id="copy_db50c7d2897a8db6b172aee4af251b3c">
          <i class="icon-copy"></i> Copy
        </a>
      </li>
      <li class="pull-right">
        <a class="expandcode code-button btn-mini" id="expand_db50c7d2897a8db6b172aee4af251b3c">
          <i class="icon-fullscreen"></i> Fullscreen
        </a>
      </li>
    </ul>
  </div>
  <figure class="code" id="code_db50c7d2897a8db6b172aee4af251b3c">
  
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="s2">&quot;unique_args&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="s2">&quot;orderNumber&quot;</span><span class="o">:</span> <span class="s2">&quot;12345&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;eventID&quot;</span><span class="o">:</span> <span class="s2">&quot;6789&quot;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></div>

<p>
	<a href="/API_Reference/SMTP_API/apps.html">Apps</a>: An associative array of filters and their settings, used to override filter settings already setup for your account. Settings are an associative array of the setting names and their values.
</p>
<div class="code-wrapper" id="wrapper_ad3605a1ccd2e4067ae1365627a5a812" itemscope itemtype="http://schema.org/Code">
  <meta itemscope="name" content="">
  <meta itemscope="programmingLangauge" content="json">
  <div class="code-buttons">
    <ul class="nav nav-tabs">
      <li class="pull-right">
        <a class="copycode code-button btn-mini" id="copy_ad3605a1ccd2e4067ae1365627a5a812">
          <i class="icon-copy"></i> Copy
        </a>
      </li>
      <li class="pull-right">
        <a class="expandcode code-button btn-mini" id="expand_ad3605a1ccd2e4067ae1365627a5a812">
          <i class="icon-fullscreen"></i> Fullscreen
        </a>
      </li>
    </ul>
  </div>
  <figure class="code" id="code_ad3605a1ccd2e4067ae1365627a5a812">
  
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="s2">&quot;filters&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="s2">&quot;footer&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="s2">&quot;settings&quot;</span><span class="o">:</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>          <span class="s2">&quot;enable&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>          <span class="s2">&quot;text/plain&quot;</span><span class="o">:</span> <span class="s2">&quot;Thank you for your business&quot;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></div>

<p>
  <a href="/API_Reference/SMTP_API/scheduling_parameters.html">Scheduling Parameters</a>: A collection of attributes that can delay sending and allow for faster mail flow.
</p>

<div class="code-wrapper" id="wrapper_adfc11ae858706236481b9cf144e1d36" itemscope itemtype="http://schema.org/Code">
  <meta itemscope="name" content="">
  <meta itemscope="programmingLangauge" content="json">
  <div class="code-buttons">
    <ul class="nav nav-tabs">
      <li class="pull-right">
        <a class="copycode code-button btn-mini" id="copy_adfc11ae858706236481b9cf144e1d36">
          <i class="icon-copy"></i> Copy
        </a>
      </li>
      <li class="pull-right">
        <a class="expandcode code-button btn-mini" id="expand_adfc11ae858706236481b9cf144e1d36">
          <i class="icon-fullscreen"></i> Fullscreen
        </a>
      </li>
    </ul>
  </div>
  <figure class="code" id="code_adfc11ae858706236481b9cf144e1d36">
  
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="s2">&quot;send_at&quot;</span><span class="o">:</span> <span class="mi">1409348513</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></div>

All of the above examples can then be combined into one larger JSON string placed in a header named X-SMTPAPI, and would look like this:

<div class="code-wrapper" id="wrapper_2913adf6a75907c49f3b02dd60f7e4a0" itemscope itemtype="http://schema.org/Code">
  <meta itemscope="name" content="">
  <meta itemscope="programmingLangauge" content="json">
  <div class="code-buttons">
    <ul class="nav nav-tabs">
      <li class="pull-right">
        <a class="copycode code-button btn-mini" id="copy_2913adf6a75907c49f3b02dd60f7e4a0">
          <i class="icon-copy"></i> Copy
        </a>
      </li>
      <li class="pull-right">
        <a class="expandcode code-button btn-mini" id="expand_2913adf6a75907c49f3b02dd60f7e4a0">
          <i class="icon-fullscreen"></i> Fullscreen
        </a>
      </li>
    </ul>
  </div>
  <figure class="code" id="code_2913adf6a75907c49f3b02dd60f7e4a0">
  
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="s2">&quot;to&quot;</span><span class="o">:</span> <span class="p">[</span>
</span><span class='line'>    <span class="s2">&quot;ben@sendgrid.com&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;joe@sendgrid.com&quot;</span>
</span><span class='line'>  <span class="p">],</span>
</span><span class='line'>  <span class="s2">&quot;sub&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="s2">&quot;%name%&quot;</span><span class="o">:</span> <span class="p">[</span>
</span><span class='line'>      <span class="s2">&quot;Ben&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s2">&quot;Joe&quot;</span>
</span><span class='line'>    <span class="p">],</span>
</span><span class='line'>    <span class="s2">&quot;%role%&quot;</span><span class="o">:</span> <span class="p">[</span>
</span><span class='line'>      <span class="s2">&quot;%sellerSection%&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s2">&quot;%buyerSection%&quot;</span>
</span><span class='line'>    <span class="p">]</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>  <span class="s2">&quot;section&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="s2">&quot;%sellerSection%&quot;</span><span class="o">:</span> <span class="s2">&quot;Seller information for: %name%&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;%buyerSection%&quot;</span><span class="o">:</span> <span class="s2">&quot;Buyer information for: %name%&quot;</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>  <span class="s2">&quot;category&quot;</span><span class="o">:</span> <span class="p">[</span>
</span><span class='line'>    <span class="s2">&quot;Orders&quot;</span>
</span><span class='line'>  <span class="p">],</span>
</span><span class='line'>  <span class="s2">&quot;unique_args&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="s2">&quot;orderNumber&quot;</span><span class="o">:</span> <span class="s2">&quot;12345&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;eventID&quot;</span><span class="o">:</span> <span class="s2">&quot;6789&quot;</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>  <span class="s2">&quot;filters&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="s2">&quot;footer&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="s2">&quot;enable&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;text/plain&quot;</span><span class="o">:</span> <span class="s2">&quot;Thank you for your business&quot;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>  <span class="s2">&quot;send_at&quot;</span><span class="o">:</span> <span class="mi">1409348513</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></div>

<p>The above example is formatted for readability. Headers must be wrapped to keep the line length under 72. By RFC 821 no line can be longer than 1,000, so if you are going to generate this string yourself it is a good idea to make sure that you wrap it.</p>

<p>Here is a full example of generating the above JSON header in a Perl script:</p>

<div class="code-wrapper" id="wrapper_f2a67240f57b0ad6cca65080749c37ee" itemscope itemtype="http://schema.org/Code">
  <meta itemscope="name" content="">
  <meta itemscope="programmingLangauge" content="perl">
  <div class="code-buttons">
    <ul class="nav nav-tabs">
      <li class="pull-right">
        <a class="copycode code-button btn-mini" id="copy_f2a67240f57b0ad6cca65080749c37ee">
          <i class="icon-copy"></i> Copy
        </a>
      </li>
      <li class="pull-right">
        <a class="expandcode code-button btn-mini" id="expand_f2a67240f57b0ad6cca65080749c37ee">
          <i class="icon-fullscreen"></i> Fullscreen
        </a>
      </li>
    </ul>
  </div>
  <figure class="code" id="code_f2a67240f57b0ad6cca65080749c37ee">
  
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="c1">#!/usr/bin/perl</span>
</span><span class='line'><span class="k">use</span> <span class="n">strict</span><span class="p">;</span>
</span><span class='line'><span class="k">use</span> <span class="n">JSON</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">my</span> <span class="nv">$header</span> <span class="o">=</span> <span class="p">{</span> <span class="n">to</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s">&#39;ben@sendgrid.com&#39;</span><span class="p">,</span> <span class="s">&#39;joe@sendgrid.com],</span>
</span><span class='line'><span class="s">sub =&gt; { &#39;</span><span class="nv">%name%</span><span class="err">&#39;</span> <span class="err">=&gt;</span> <span class="err">[</span> <span class="err">&#39;</span><span class="nv">Ben</span><span class="s">&#39;, &#39;</span><span class="n">Joe</span><span class="s">&#39; ], &#39;</span><span class="nv">%role%</span><span class="err">&#39;</span> <span class="err">=&gt;;</span> <span class="err">[</span> <span class="err">&#39;</span><span class="nv">sellerSection</span><span class="s">&#39;, &#39;</span><span class="n">buyerSection</span><span class="s">&#39; ] },</span>
</span><span class='line'><span class="s">section =&gt; { &#39;</span><span class="nv">%sellerSection%</span><span class="err">&#39;</span> <span class="err">=&gt;;</span> <span class="err">&#39;</span><span class="nv">Seller</span> <span class="n">information</span> <span class="k">for</span><span class="p">:</span> <span class="nv">%name%</span><span class="err">&#39;</span><span class="p">,</span> <span class="s">&#39;%buyerSection%&#39;</span> <span class="o">=&gt;</span> <span class="s">&#39;Buyer information for: %name%&#39;</span> <span class="p">},</span>
</span><span class='line'><span class="n">category</span> <span class="o">=&gt;</span> <span class="s">&#39;Orders&#39;</span><span class="p">,</span>
</span><span class='line'><span class="n">unique_args</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="s">&#39;orderNumber&#39;</span> <span class="o">=&gt;</span> <span class="s">&#39;12345&#39;</span><span class="p">,</span> <span class="s">&#39;eventID&#39;</span> <span class="o">=&gt;</span> <span class="s">&#39;6789&#39;</span> <span class="p">},</span>
</span><span class='line'><span class="n">filters</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="s">&#39;footer&#39;</span> <span class="o">=&gt;</span> <span class="p">{</span><span class="s">&#39;settings&#39;</span> <span class="o">=&gt;</span> <span class="p">{</span><span class="s">&#39;text/plain&#39;</span> <span class="o">=&gt;</span> <span class="s">&quot;Thank you for your business&quot;</span><span class="p">}}}};</span>
</span><span class='line'>
</span><span class='line'><span class="k">my</span> <span class="nv">$json</span> <span class="o">=</span> <span class="n">JSON</span><span class="o">-&gt;</span><span class="k">new</span><span class="p">;</span>
</span><span class='line'><span class="nv">$json</span><span class="o">-&gt;</span><span class="n">space_before</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span class='line'><span class="nv">$json</span><span class="o">-&gt;</span><span class="n">space_after</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span class='line'><span class="k">my</span> <span class="nv">$js</span> <span class="o">=</span> <span class="nv">$json</span><span class="o">-&gt;</span><span class="n">encode</span><span class="p">(</span><span class="nv">$header</span><span class="p">);</span>
</span><span class='line'><span class="c1"># This regex breaks the string up at whitespaces to keep the line length short</span>
</span><span class='line'><span class="nv">$js</span> <span class="o">=~</span> <span class="sr">s/(.{1,72})(\s)/$1\n   /g</span><span class="p">;</span>
</span><span class='line'><span class="k">my</span> <span class="nv">$hdr</span> <span class="o">=</span> <span class="s">&quot;X-SMTPAPI: $js&quot;</span><span class="p">;</span>
</span><span class='line'><span class="k">print</span> <span class="s">&quot;$hdr\n&quot;</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure></div>
<h2 class="anchor-wrap"><a name="-Requirements-and-Limitations" class="anchor" href="#-Requirements-and-Limitations"><span class="anchor-icon"><i class="icon-link"></i></span></a>Requirements and Limitations</h2>

<div class="callout callout-warning">
<p>While there is a hard limit of 10,000 addresses that can be sent to in a multiple recipient e-mail, it is best to split up large jobs at around 1,000 recipients, as this will better allow for the processing load to be distributed. Further, if you have a large number of additional substitions or sections in the headers, it is best to split the send into even smaller groups.</p>
</div>

<p>When setting filters via SMTPAPI, all filter names and setting names must be lowercase.</p>

<p>If you use the multiple recipient functionality of the API, you must not send to multiple recipients with the SMTP protocol as well. Doing so can cause duplicates of the message to be sent.
</p>

<p>Ensure that the header is limited to a maximum total line length of 1,000 characters. Failure to do this can cause intermediate MTA&#8217;s to split the header for you on non-space boundaries, which will cause spaces to be inserted in the final resulting e-mail. In addition, if your e-mail is going through another MTA before reaching SendGrid, it is likely to have an even lower setting for maximum header length and may truncate the header.</p>

<p>When using the API, if our system encounters a parsing error, the message will be bounced to the address specified in the MAIL FROM portion of the SMTP session. The MAIL FROM address is re-written when we send e-mail out for final delivery, so it is safe to set this to an address that can receive the bounces so that you will be alerted on errors.</p>

<p>For substitution tags, it is best to avoid characters that have special meaning in html, such as <,>, and &. These might end up encoded and will not be properly substituted.</p>



  
  
    <div class="feedback">
  <span class="prompt">Was this helpful?</span>
  <a class="feedback-element feedback-positive" href="#">
    <img src="/images/encircled-plus.png" alt="+" />
    Yes
  </a>
  <a class="feedback-element feedback-negative" href="#">
    <img src="/images/encircled-minus.png" alt="-" />
    No
  </a>
  <a class="feedback-element feedback-more" href="#">
    <img src="/images/feedback.png" alt="" />
    Feedback
  </a>
</div>

<div class="modal fade" id="feedbackModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3 class="modal-title">Feedback</h3>
      </div>
      <div class="modal-body">
        <p>If you have a question that needs an answer, please try the <a href="https://community.sendgrid.com" target="_blank">community page</a> or <a href="https://sendgrid.zendesk.com/hc/en-us/search?utf8=%E2%9C%93&query=SMTP%20API%20Overview&commit=Search" target="_blank">contact support</a>.</p>
        <p>Otherwise, please <a href="https://github.com/sendgrid/docs/issues/new?title=SMTP%20API%20Overview&body=https://nquinlan.github.io/docs/API_Reference/SMTP_API/index.html" target="_blank">open an issue</a> or <a class="" href="mailto:community@sendgrid.com?subject=[docs-feedback]%20SMTP%20API%20Overview&body=Hello!%0AI%20have%20some%20feedback%20regarding%20your%20documentation%3A%0A%0A%0A%0Ahttps://nquinlan.github.io/docs/API_Reference/SMTP_API/index.html">drop us a line.</a></p>
        <p>Thanks for helping us improve the docs!</p>
      </div>
    </div>
  </div>
</div>

  
</div>
</article>
<div class="modal fade" id="credentialsModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <form id="credentials">
      <div class="modal-body">
        <div class="form-group">
          <label for="username">Username:</label>
          <input class="form-control" type="text" name="username" id="username">
        </div>
        <div class="form-group">
          <label for="password">Password:</label>
          <input class="form-control" type="password" name="password" id="password">
        </div>
        <div class="form-group">
          <label for="response-format">Response Format:</label>
          <select name="response-format" id="response-format">
            <option>JSON</option>
            <option>XML</option>
          </select>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <button type="submit" id="save-credentials" class="btn btn-primary">Save</button>
      </div>
    </form>
    </div>
  </div>
</div>


<meta itemprop="specialty" content="email">
<meta itemprop="interactivityType" content="mixed">
</div>

    </div>
  </div>
  
	<iframe id="footer-iframe" src="//sendgrid.com/mkt-api/v1/header-footer?footer=1&css=1&js=1&iframe=1"></iframe>

  
</body>
</html>
